(this["webpackJsonpdeal-management"]=this["webpackJsonpdeal-management"]||[]).push([[0],{144:function(e,t,a){e.exports=a(296)},149:function(e,t,a){},151:function(e,t,a){},296:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),l=a.n(s),c=(a(149),a(138)),o=a(19),i=a.n(o),u=a(61),m=a(31),d=(a(151),a(152),a(298)),f=a(303),p=a(304),h=a(299),v=a(37),b=a(300),E=a(305),g=a(302),w=a(301),y=a(126);function M(){return{assets:[]}}function x(e){return{tenant:e.tenant,descriptionLabel:"Size: ".concat(e.size," | Assets: ").concat((t=e.assets,t?t.map((function(e){return e.name})).join(", "):"none"))};var t}function S(e){return e.map(x)}var k=d.a.Header,j=d.a.Content,F=d.a.Footer,O=f.a.Search,I=p.a.Step,A=[{name:"Asset 1"},{name:"Asset 2"}],C=[{tenant:"JCPenny",size:100},{tenant:"Starbucks",size:200},{tenant:"H&M",size:300},{tenant:"Blue Bottle",size:400,assets:A}],D=[{name:"Asset 1"}];function z(){return(z=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/deals.json"!==t.path||"GET"!==t.method){e.next=10;break}return e.abrupt("return",C);case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:if(!t.path.includes("/assets?search")){e.next=14;break}return e.abrupt("return",D);case 14:if(!t.path.includes("/assets")){e.next=16;break}return e.abrupt("return",A);case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T,L,N=(T=function(e){return z.apply(this,arguments)},{perform:function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),V=(L=N,{dealForm:new M,deals:[],errors:[],tenant:null,selectableAssets:[],server:L,resetDealForm:function(){this.dealForm=new M,this.errors=[],this.assetSearchResults=[]},save:function(){var e=this.validate();if(e)this.errors.push(e);else{this.errors=[];var t=Object.assign({},this.dealForm);this.deals.push(x(t));var a={path:"/deals",method:"POST",params:t};L.perform(a)}},searchForAssets:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={path:"/assets?search=".concat(t),method:"GET"},e.next=3,L.perform(a);case 3:return n=e.sent,e.abrupt("return",(function(e){return e.selectableAssets=n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validate:function(){return 0===this.dealForm.assets.length?"Deals must be tied to at least one asset":null},viewDeals:function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.perform({path:"/deals.json",method:"GET"});case 2:if(!(t=e.sent).error){e.next=5;break}return e.abrupt("return",(function(e){e.dealResponse=[],e.errors=[t.error]}));case 5:return a=S(t),e.abrupt("return",(function(e){e.deals=a}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),viewAssets:function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.perform({path:"/assets.json",method:"GET"});case 2:return t=e.sent,e.abrupt("return",(function(e){e.selectableAssets=t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),B=Object(n.createContext)();function G(e){return r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Item.Meta,{title:e.deal.tenant}),e.deal.descriptionLabel)}function P(e){return r.a.createElement(v.a,{type:"default",onClick:e.showNewDealForm},"Add deal")}function H(e){return r.a.createElement(h.a,{itemLayout:"vertical",bordered:!0,dataSource:e.deals,header:r.a.createElement(P,{showNewDealForm:e.showNewDealForm}),renderItem:function(e){return r.a.createElement(G,{deal:e})}})}function J(e){var t=Object(n.useContext)(B),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(0),d=Object(u.a)(o,2),w=d[0],y=d[1],M=Object(n.useState)([]),x=Object(u.a)(M,2),S=x[0],k=x[1],j=[{title:"Select assets",content:r.a.createElement((function(){return r.a.createElement(b.a,{layout:"vertical"},r.a.createElement(b.a.Item,{label:"Selected"},r.a.createElement(h.a,{itemLayout:"vertical",bordered:!0,dataSource:S,renderItem:function(e){return r.a.createElement(h.a.Item,null,e.name)}})),r.a.createElement(b.a.Item,{hasFeedback:!0,validateStatus:s.isAssetSearchLoading?"validating":""},r.a.createElement(O,{placeholder:"Search for assets",onSearch:function(e){l((function(e){e.isAssetSearchLoading=!0})),setTimeout(Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.dealManagement.searchForAssets(e);case 2:a=t.sent,l((function(e){e.isAssetSearchLoading=!1,a(e.dealManagement)}));case 4:case"end":return t.stop()}}),t)}))),1e3)}})),r.a.createElement(b.a.Item,{label:"Your assets"},r.a.createElement(h.a,{itemLayout:"vertical",bordered:!0,dataSource:s.dealManagement.selectableAssets,renderItem:function(e){return r.a.createElement(h.a.Item,{style:{cursor:"pointer "},onClick:function(){return function(e){k([e].concat(Object(c.a)(S))),l((function(t){t.dealManagement.dealForm.assets.push(e)}))}(e)}},e.name)}})),s.dealManagement.errors.length>0?r.a.createElement(E.a,{message:s.dealManagement.errors[0],type:"error"}):null)}),null)},{title:"Enter details",content:r.a.createElement(b.a,{layout:"vertical"},r.a.createElement(b.a.Item,{label:"Size"},r.a.createElement(f.a,{placeholder:"Size",value:s.dealManagement.dealForm.size,onChange:C})),r.a.createElement(b.a.Item,{label:"Tenant"},r.a.createElement(f.a,{placeholder:"Tenant",value:s.dealManagement.dealForm.tenant,onChange:D})))},{title:"Review",content:r.a.createElement((function(){return r.a.createElement("div",null,r.a.createElement(b.a,{layout:"vertical"},r.a.createElement(b.a.Item,{label:"Selected assets"},r.a.createElement(h.a,{itemLayout:"vertical",bordered:!0,dataSource:S,renderItem:function(e){return r.a.createElement(h.a.Item,null,e.name)}})),r.a.createElement("h4",null,"Details"),r.a.createElement(b.a.Item,{label:"Size"},r.a.createElement(f.a,{placeholder:"Size",value:s.dealManagement.dealForm.size,onChange:C})),r.a.createElement(b.a.Item,{label:"Tenant"},r.a.createElement(f.a,{placeholder:"Tenant",value:s.dealManagement.dealForm.tenant,onChange:D}))))}),null)}];function F(){y(w+1)}function A(){y(w-1)}function C(e){var t=e.target.value;l((function(e){e.dealManagement.dealForm.size=t}))}function D(e){var t=e.target.value;l((function(e){e.dealManagement.dealForm.tenant=t}))}function z(){l((function(e){e.dealManagement.save(),e.isDealModalVisible=0!==e.dealManagement.errors.length})),y(0),k([])}function T(){l((function(e){e.isDealModalVisible=!1})),y(0),k([])}function L(){return 0!==w||function(){var e=s.dealManagement.dealForm.assets;return e[0]?e[0].name:void 0}()}return r.a.createElement(g.a,{visible:s.isDealModalVisible,onCancel:T,closable:!1,okText:"Next",footer:r.a.createElement("div",null,r.a.createElement(v.a,{onClick:T},"Cancel"),w>0&&r.a.createElement(v.a,{onClick:A},"Previous"),w<j.length-1&&r.a.createElement(v.a,{type:"primary",disabled:!L(),onClick:F},"Next"),w===j.length-1&&r.a.createElement(v.a,{type:"primary",onClick:z},"Save"))},r.a.createElement(p.a,{current:w},j.map((function(e){return r.a.createElement(I,{key:e.title,title:e.title})}))),r.a.createElement("div",{style:{marginTop:"14px"}},j[w].content))}var R=function(){var e=Object(n.useState)({dealManagement:V,isDealModalVisible:!1,isAssetSearchLoading:!1}),t=Object(u.a)(e,2),a=t[0],s=t[1];function l(e){var t=Object(y.a)(a,e);s(t)}var c=[a,l];return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dealManagement.viewDeals();case 2:return t=e.sent,e.next=5,a.dealManagement.viewAssets();case 5:n=e.sent,l((function(e){t(e.dealManagement),n(e.dealManagement)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(B.Provider,{value:c},r.a.createElement(d.a,null,r.a.createElement(k,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement(w.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"],style:{lineHeight:"64px"}},r.a.createElement(w.a.Item,{key:"0"},"Deal Management"))),r.a.createElement(j,{style:{padding:"0 50px",marginTop:64}},r.a.createElement(J,null),r.a.createElement("div",{style:{margin:24,background:"#fff"}},r.a.createElement(H,{deals:a.dealManagement.deals,showNewDealForm:function(){l((function(e){e.dealManagement.resetDealForm(),e.isDealModalVisible=!0}))}}))),r.a.createElement(F,{style:{textAlign:"center"}},"Deal Manager \xa92019 Created by amw-zero")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[144,1,2]]]);
//# sourceMappingURL=main.c2d46686.chunk.js.map